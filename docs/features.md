# 機能概要

Screen Share Viewerの主要機能について説明します。

## 画面共有機能

### 基本機能

- **Screen Capture API**: ブラウザの `getDisplayMedia` API を使用した画面共有
- **高解像度対応**: 最大4K (3840x2160) の解像度に対応
- **高フレームレート**: 最大60fps対応
- **自動品質調整**: ストリーム取得後に動的に解像度を最適化

### 画質最適化

1. **動的制約適用**: ストリーム取得後に `applyConstraints()` で高解像度を要求
2. **CSS最適化**: GPUアクセラレーション、crisp-edgesレンダリング
3. **解像度監視**: 低解像度の場合はコンソールに警告を表示

実際の解像度とフレームレートは、共有元の画面性能に依存します。

## ビューアー機能

### アスペクト比選択

複数のプリセットから選択可能:

| プリセット | 比率 | 用途 |
|-----------|------|------|
| 9:16 | iPhone縦 | iPhoneの縦向き画面 |
| 16:9 | iPhone横 | iPhoneの横向き画面、一般的なディスプレイ |
| 9:19.5 | iPhone Pro | iPhone Pro シリーズ |
| 4:3 | iPad | iPadの横向き |
| 3:4 | iPad縦 | iPadの縦向き |
| 16:10 | - | MacBookなどのディスプレイ |
| 21:9 | ウルトラワイド | ウルトラワイドディスプレイ |
| 1:1 | 正方形 | 正方形のフレーム |

### 向き切り替え

- **縦向き**: デフォルト設定、スマートフォンの縦画面に最適
- **横向き**: ボタンをクリックして切り替え、横向きの画面に最適

### サイズ調整

- **範囲**: 50% ～ 200%
- **ステップ**: 10%刻み
- **リアルタイム**: スライダーで即座に反映

## セカンドポインター機能 (実装予定)

### 概要

複数のポインターデバイスを接続して、画面上に表示する機能です。

### 機能

- **第1マウス接続**: シアン色のポインター
- **第2マウス接続**: マゼンタ色のポインター
- **接続状態表示**: 接続済みデバイスの一覧表示
- **切断機能**: デバイスの切断

> **注意**: この機能は現在開発中で、UIのみ実装されています。実際のポインター表示機能は今後実装予定です。

## エラーハンドリング

### 詳細なエラーメッセージ

画面共有が失敗した場合、エラーの種類に応じて具体的な対処法を表示:

- **NotAllowedError**: 権限がない場合の対処法を案内
- **NotFoundError**: ディスプレイが見つからない場合
- **NotSupportedError**: ブラウザが非対応の場合
- **AbortError**: ユーザーがキャンセルした場合
- **TypeError**: 制約が無効な場合

### コンソールログ

開発者向けに詳細なログを出力:

```
[ScreenCapture] Requesting display media...
[ScreenCapture] Got media stream: MediaStream {...}
[ScreenCapture] ✅ Applied high resolution constraints
[ScreenCapture] Resolution: 3840x2160 @ 60fps
[ScreenCapture] ✅ Started capturing screen successfully
```

## ブラウザ互換性

| ブラウザ | バージョン | 対応状況 |
|---------|-----------|---------|
| Chrome | 72+ | ✅ 完全対応 |
| Edge | 79+ | ✅ 完全対応 |
| Safari | 13+ | ✅ 対応 (macOS 10.15+) |
| Firefox | 66+ | ✅ 対応 |

**要件**: HTTPS接続または localhost でのみ動作

## パフォーマンス

- **最小システム要件**:
  - CPU: デュアルコア 2GHz以上
  - RAM: 4GB以上
  - GPU: ハードウェアアクセラレーション対応

- **推奨環境**:
  - CPU: クアッドコア 2.5GHz以上
  - RAM: 8GB以上
  - GPU: 専用GPU

高解像度・高フレームレートでの画面共有は、CPUとGPUのリソースを消費します。
